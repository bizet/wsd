angular.module('wsd', [
    'ngRoute'])
  .config(function($routeProvider, $locationProvider) {
    var intro = {
          templateUrl: 'static/tpl/intro.html',
          controller: 'intro_controller'
        },
        download = {
          templateUrl: 'static/tpl/download.html',
          controller: 'download_controller'
        },
        sign = {
          templateUrl: 'static/tpl/sign.html',
          controller: 'sign_controller'
        };
    $routeProvider
      .when('/sign', sign)
      .when('/download', download)
      .when('/index.php', intro)
      .when('/', intro)
      .otherwise({redirectTo: '/'});
    $locationProvider.html5Mode(true);
  });

angular.module('wsd')
  .controller('download_controller', function() {
  });

angular.module('wsd')
  .controller('intro_controller', function() {
  });

angular.module('wsd')
  .controller('menu_controller', function($scope, $route, $routeParams, $location) {
     $scope.$route = $route;
     $scope.$location = $location;
     $scope.$routeParams = $routeParams;
  });

angular.module('wsd')
  .controller('sign_controller', function($scope, sign_service) {
    $scope.login = function() {
      if ($scope.loginForm.$valid) {
        sign_service.login(
          $scope.user
        );
      }
    };
  });




angular.module('wsd')
  .factory('sign_service', ['$http', function($http) {
    return {
      login: function(user) {
        $http.post('user/login', {
          username: user.username,
          password: user.password
        }).success(function (data) {
          console.log(data);
        });
      }
    };
  }])
;
